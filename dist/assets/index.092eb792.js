var k=Object.defineProperty;var g=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var y=(e,t,o)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,E=(e,t)=>{for(var o in t||(t={}))b.call(t,o)&&y(e,o,t[o]);if(g)for(var o of g(t))B.call(t,o)&&y(e,o,t[o]);return e};var F=(e,t)=>{var o={};for(var u in e)b.call(e,u)&&t.indexOf(u)<0&&(o[u]=e[u]);if(e!=null&&g)for(var u of g(e))t.indexOf(u)<0&&B.call(e,u)&&(o[u]=e[u]);return o};import{l as j,d as A,r as O,a as w,o as U,E as T,b as q,c as z,e as I,f as L,g as P,h as H,i as M,j as n,w as i,k as v,m as R,n as V,p as x,q as J,s as G,t as K,u as Q,v as W}from"./vendor.bd79d6ad.js";const X=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&u(m)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}};X();const Y="/calib",h=async(e,u={})=>{var r=u,{data:t}=r,o=F(r,["data"]);const a=E({method:"GET"},o);return a.method.toUpperCase()==="GET"?(e+=`?${j.stringify(t)}`,console.log("endponit",e)):a.body=JSON.stringify(t||{}),window.fetch(`${Y}/${e}`,a).then(async m=>{const s=await m.json();return m.ok?s.data:Promise.reject(s)})},Z=e=>{let t="";try{t=JSON.stringify(e)}catch(o){console.warn(o)}return t},ee=e=>{let t;try{t=JSON.parse(e)}catch(o){console.warn(o)}return t},te=(e,t)=>{window.localStorage.setItem(e,Z(t))},C=e=>{const t=window.localStorage.getItem(e);return ee(t||"")},ue=()=>{var o;let e="",t="";return e=window.location.href,t=(o=e==null?void 0:e.split("?")[1])==null?void 0:o.split("=")[1],t};var D=(e,t)=>{const o=e.__vccOpts||e;for(const[u,r]of t)o[u]=r;return o};const oe=A({name:"Home",setup(){let e,t=ue();const o=O(),u=w({username:"",github:"",originText:"",latestText:"",newText:"",email:""}),r=w({username:[{min:3,max:25,message:"\u6635\u79F0\u957F\u5EA6\u9700\u8981\u4E3A3\u523025\u4E4B\u95F4",trigger:"blur"}],github:[{required:!0,message:"github \u4E3B\u9875\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],newText:[{required:!0,message:"\u7FFB\u8BD1\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],email:[{required:!0,message:"",trigger:"blur"}]}),a=async()=>{if(t){const s=C("tw");await h("next_msg",{data:{msgid:t}}).then(l=>{if(u.originText=l[0].msgen,u.latestText=l[0].msgzh,u.newText=l[0].msgzh,t=l[0].msgid,s){const{name:d,github:f,email:p}=s;u.username=d,u.github=f,u.email=p}})}};return U(async()=>{const s=C("tw");t?await h("get_msg",{data:{msgid:t},method:"post"}).then(l=>{if(u.originText=l[0].msgen,u.latestText=l[0].msgzh,u.newText=l[0].msgzh,s){const{name:d,github:f,email:p}=s;u.username=d,u.github=f,u.email=p}}):T.info("\u8BF7\u4ECE Nav2 \u4E2D\u6587\u7F51\u9875\u9762\u8FDB\u5165")}),{form:u,submitForm:()=>{o.value.validate(s=>{if(s){const d={calibmsg:u.newText,msgid:t,name:u.username,github:u.github,email:u.email};h("calib_msg",{data:d,method:"POST"}).then(f=>{console.log(f,"submitForm"),v({message:"\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01",type:"success"});const _=d,{calibmsg:p,msgid:c}=_,S=F(_,["calibmsg","msgid"]);te("tw",S)}).catch(f=>{v.error(f)})}else T({title:"Error",message:"This is an error message",type:"error"})})},data:e,rules:r,getNextMsg:a,formRef:o}}}),re={class:"container"},ne=R("h2",{class:"title"},"\u3000\u5F00\u6E90\u4E92\u52A9 \u5171\u540C\u8FDB\u6B65 \u611F\u8C22\u60A8\u7684\u6821\u6B63\u3000",-1),ae=x("\u63D0\u4EA4"),se=x("\u4E0B\u4E00\u6761");function le(e,t,o,u,r,a){const m=q,s=z,l=I,d=L,f=P,p=H;return V(),M("div",re,[ne,n(m),n(p,{ref:"formRef",model:e.form,"label-width":"auto",rules:e.rules},{default:i(()=>[n(m,{justify:"center",align:"center"},{default:i(()=>[n(d,{span:8},{default:i(()=>[n(l,{label:"\u6635\u79F0\uFF1A",prop:"username"},{default:i(()=>[n(s,{modelValue:e.form.username,"onUpdate:modelValue":t[0]||(t[0]=c=>e.form.username=c),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u6635\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),n(d,{span:8},{default:i(()=>[n(l,{label:"github\u4E3B\u9875\uFF1A",prop:"github"},{default:i(()=>[n(s,{modelValue:e.form.github,"onUpdate:modelValue":t[1]||(t[1]=c=>e.form.github=c),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684github\u4E3B\u9875\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1}),n(d,{span:8},{default:i(()=>[n(l,{label:"\u90AE\u7BB1\uFF1A",prop:"email"},{default:i(()=>[n(s,{modelValue:e.form.email,"onUpdate:modelValue":t[2]||(t[2]=c=>e.form.email=c),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(l,{label:"\u539F\u6587\u5185\u5BB9\uFF1A"},{default:i(()=>[n(s,{modelValue:e.form.originText,"onUpdate:modelValue":t[3]||(t[3]=c=>e.form.originText=c),type:"textarea",readonly:"",autosize:""},null,8,["modelValue"])]),_:1}),n(l,{label:"\u4E0A\u4E00\u7248\u672C\u7FFB\u8BD1\u5185\u5BB9\uFF1A"},{default:i(()=>[n(s,{modelValue:e.form.latestText,"onUpdate:modelValue":t[4]||(t[4]=c=>e.form.latestText=c),type:"textarea",autosize:"",readonly:""},null,8,["modelValue"])]),_:1}),n(l,{label:"\u65B0\u7684\u7FFB\u8BD1\u5185\u5BB9\uFF1A",prop:"newText"},{default:i(()=>[n(s,{modelValue:e.form.newText,"onUpdate:modelValue":t[5]||(t[5]=c=>e.form.newText=c),type:"textarea",autosize:"",placeholder:"\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),n(l,null,{default:i(()=>[n(m,{justify:"center"},{default:i(()=>[n(d,{span:12},{default:i(()=>[n(f,{type:"primary",onClick:e.submitForm},{default:i(()=>[ae]),_:1},8,["onClick"])]),_:1}),n(d,{span:12},{default:i(()=>[n(f,{type:"primary",onClick:e.getNextMsg},{default:i(()=>[se]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])}var N=D(oe,[["render",le]]);const ie=A({components:{Home:N},name:"App",setup(){return{}}});function me(e,t,o,u,r,a){const m=J("home");return V(),G(m)}var de=D(ie,[["render",me]]);const ce=[{path:"/",redirect:"/home"},{path:"/home/:msgid",name:"Home",component:N}],fe=K({history:Q(),routes:ce}),$=W(de);$.use(fe);$.mount("#app");
