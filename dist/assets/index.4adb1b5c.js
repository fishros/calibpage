var k=Object.defineProperty;var b=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var D=(e,t,o)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,N=(e,t)=>{for(var o in t||(t={}))V.call(t,o)&&D(e,o,t[o]);if(b)for(var o of b(t))x.call(t,o)&&D(e,o,t[o]);return e};var _=(e,t)=>{var o={};for(var u in e)V.call(e,u)&&t.indexOf(u)<0&&(o[u]=e[u]);if(e!=null&&b)for(var u of b(e))t.indexOf(u)<0&&x.call(e,u)&&(o[u]=e[u]);return o};import{l as H,d as $,r as G,a as S,o as M,E as v,b as R,c as J,e as Z,f as K,g as Q,h as W,i as X,j as r,w as l,k as y,m as Y,n as z,p as T,q as ee,s as te,t as ue,u as oe,v as re}from"./vendor.9e6df5cf.js";const se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}};se();const O="http://dev.nav2.fishros.com/calib",w=async(e,u={})=>{var s=u,{data:t}=s,o=_(s,["data"]);console.log(O,"apiUrl");const n=N({method:"GET"},o);return n.method.toUpperCase()==="GET"?(e+=`?${H.stringify(t)}`,console.log("endponit",e)):n.body=JSON.stringify(t||{}),window.fetch(`${O}/${e}`,n).then(async i=>{const f=await i.json();return i.ok?f.data:Promise.reject(f)})},ae=e=>{let t="";try{t=JSON.stringify(e)}catch(o){console.warn(o)}return t},ne=e=>{let t;try{t=JSON.parse(e)}catch(o){console.warn(o)}return t},U=(e,t)=>{window.localStorage.setItem(e,ae(t))},j=e=>{const t=window.localStorage.getItem(e);return ne(t||"")},le=()=>{var o;let e="",t="";return e=window.location.href,t=(o=e==null?void 0:e.split("?")[1])==null?void 0:o.split("=")[1],t};var P=(e,t)=>{const o=e.__vccOpts||e;for(const[u,s]of t)o[u]=s;return o};const ie=$({name:"Home",setup(){let e,t=le();const o=G(),u=S({username:"",github:"",originText:"",latestText:"",newText:"",email:""}),s=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,n=/^https:\/\/github.com.*$/,B=S({username:[{min:2,max:25,message:"\u6635\u79F0\u957F\u5EA6\u9700\u8981\u4E3A2\u523025\u4E4B\u95F4",trigger:"blur"}],github:[{validator:(c,m,a)=>{m===""?a(new Error("\u8BF7\u8F93\u5165\u60A8\u7684github\u4E3B\u9875\u5730\u5740")):n.test(u.github)||a(new Error("github\u4E3B\u9875\u5730\u5740\u4E0D\u6B63\u786E\uFF0C\u8BF7\u4EE5https://github.com\u5F00\u5934")),a()},required:!0,trigger:"blur"}],newText:[{validator:(c,m,a)=>{m===""?a(new Error("\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9")):(u.newText===u.latestText&&a(new Error("\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9")),a())},required:!0,trigger:"blur"}],email:[{validator:(c,m,a)=>{m===""?a(new Error("\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740")):s.test(u.email)||a(new Error("\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E")),a()},required:!0,trigger:"blur"}]}),F=async()=>{if(t){const c=j("tw");await w("next_msg",{data:{msgid:t}}).then(m=>{if(u.originText=m[0].msgen,u.latestText=m[0].msgzh,u.newText=m[0].msgzh,t=m[0].msgid,c){const{name:a,github:g,email:h}=c;u.username=a,u.github=g,u.email=h}})}};return M(async()=>{const c=j("tw");t?await w("get_msg",{data:{msgid:t},method:"post"}).then(m=>{if(u.originText=m[0].msgen,u.latestText=m[0].msgzh,u.newText=m[0].msgzh,c){const{name:a,github:g,email:h}=c;u.username=a,u.github=g,u.email=h}}):v.info("\u8BF7\u4ECE Nav2 \u4E2D\u6587\u7F51\u9875\u9762\u8FDB\u5165")}),{form:u,submitForm:()=>{o.value.validate(c=>{if(c){const a={calibmsg:u.newText,msgid:t,name:u.username,github:u.github,email:u.email};w("calib_msg",{data:a,method:"POST"}).then(g=>{console.log(g,"submitForm"),y({message:"\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01",type:"success"});const E=a,{calibmsg:h,msgid:L}=E,A=_(E,["calibmsg","msgid"]);U("tw",A)}).catch(g=>{y.error(g)})}else v({title:"Error",message:"\u8F93\u5165\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u60A8\u8F93\u5165\u7684\u5185\u5BB9",type:"error"})})},submitFormTitle:()=>{o.value.validate(c=>{if(c){const a={calibmsg:u.newText,msgid:t,name:u.username,github:u.github,email:u.email,status:200};w("calib_msg",{data:a,method:"POST"}).then(g=>{console.log(g,"submitForm"),y({message:"\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01",type:"success"});const E=a,{calibmsg:h,msgid:L}=E,A=_(E,["calibmsg","msgid"]);U("tw",A)}).catch(g=>{y.error(g)})}else v({title:"Error",message:"This is an error message",type:"error"})})},data:e,rules:B,getNextMsg:F,formRef:o}}}),me={class:"container"},de=Y("h2",{class:"title"}," \u5F00\u6E90\u4E92\u52A9 \u5171\u540C\u8FDB\u6B65 \u611F\u8C22\u60A8\u7684\u6821\u6B63 ",-1),ce=T("\u63D0\u4EA4"),fe=T("\u4E0B\u4E00\u6761"),ge=T("\u6807\u8BB0\u6807\u9898\u5E76\u63D0\u4EA4");function pe(e,t,o,u,s,n){const i=R,f=J,p=Z,B=K,F=Q,C=W;return z(),X("div",me,[de,r(C,{ref:"formRef",model:e.form,"label-width":"auto",rules:e.rules},{default:l(()=>[r(B,{justify:"center",align:"center"},{default:l(()=>[r(p,{span:8},{default:l(()=>[r(f,{label:"\u6635\u79F0\uFF1A",prop:"username"},{default:l(()=>[r(i,{modelValue:e.form.username,"onUpdate:modelValue":t[0]||(t[0]=d=>e.form.username=d),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u6635\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),r(p,{span:8},{default:l(()=>[r(f,{label:"github\u4E3B\u9875\uFF1A",prop:"github"},{default:l(()=>[r(i,{modelValue:e.form.github,"onUpdate:modelValue":t[1]||(t[1]=d=>e.form.github=d),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684github\u4E3B\u9875\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1}),r(p,{span:8},{default:l(()=>[r(f,{label:"\u90AE\u7BB1\uFF1A",prop:"email"},{default:l(()=>[r(i,{modelValue:e.form.email,"onUpdate:modelValue":t[2]||(t[2]=d=>e.form.email=d),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(f,{label:"\u539F\u6587\u5185\u5BB9\uFF1A"},{default:l(()=>[r(i,{modelValue:e.form.originText,"onUpdate:modelValue":t[3]||(t[3]=d=>e.form.originText=d),type:"textarea",readonly:"",autosize:""},null,8,["modelValue"])]),_:1}),r(f,{label:"\u4E0A\u4E00\u7248\u672C\u7FFB\u8BD1\u5185\u5BB9\uFF1A"},{default:l(()=>[r(i,{modelValue:e.form.latestText,"onUpdate:modelValue":t[4]||(t[4]=d=>e.form.latestText=d),type:"textarea",autosize:"",readonly:""},null,8,["modelValue"])]),_:1}),r(f,{label:"\u65B0\u7684\u7FFB\u8BD1\u5185\u5BB9\uFF1A",prop:"newText"},{default:l(()=>[r(i,{modelValue:e.form.newText,"onUpdate:modelValue":t[5]||(t[5]=d=>e.form.newText=d),type:"textarea",autosize:"",placeholder:"\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),r(f,null,{default:l(()=>[r(B,{justify:"center"},{default:l(()=>[r(p,{span:8},{default:l(()=>[r(F,{type:"primary",onClick:e.submitForm},{default:l(()=>[ce]),_:1},8,["onClick"])]),_:1}),r(p,{span:8},{default:l(()=>[r(F,{type:"primary",onClick:e.getNextMsg},{default:l(()=>[fe]),_:1},8,["onClick"])]),_:1}),r(p,{span:8},{default:l(()=>[r(F,{type:"primary",onClick:e.submitFormTitle},{default:l(()=>[ge]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])}var q=P(ie,[["render",pe]]);const Fe=$({components:{Home:q},name:"App",setup(){return{}}});function he(e,t,o,u,s,n){const i=ee("home");return z(),te(i)}var Ee=P(Fe,[["render",he]]);const Be=[{path:"/",redirect:"/home"},{path:"/home/:msgid",name:"Home",component:q}],be=ue({history:oe(),routes:Be}),I=re(Ee);I.use(be);I.mount("#app");
