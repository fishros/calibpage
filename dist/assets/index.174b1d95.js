var H=Object.defineProperty;var w=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var $=(e,t,o)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,S=(e,t)=>{for(var o in t||(t={}))x.call(t,o)&&$(e,o,t[o]);if(w)for(var o of w(t))N.call(t,o)&&$(e,o,t[o]);return e};var B=(e,t)=>{var o={};for(var u in e)x.call(e,u)&&t.indexOf(u)<0&&(o[u]=e[u]);if(e!=null&&w)for(var u of w(e))t.indexOf(u)<0&&N.call(e,u)&&(o[u]=e[u]);return o};import{l as G,d as U,r as M,a as O,o as R,E as z,b as J,c as Z,e as K,f as Q,g as W,h as X,i as Y,j as n,w as m,k as b,m as A,n as P,p as v,q as ee,s as te,t as ue,u as oe,v as se}from"./vendor.9e6df5cf.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(r){if(r.ep)return;r.ep=!0;const l=o(r);fetch(r.href,l)}};re();const j="http://dev.nav2.fishros.com/calib",E=async(e,u={})=>{var r=u,{data:t}=r,o=B(r,["data"]);console.log(j,"apiUrl");const l=S({method:"GET"},o);return l.method.toUpperCase()==="GET"?(e+=`?${G.stringify(t)}`,console.log("endponit",e)):l.body=JSON.stringify(t||{}),window.fetch(`${j}/${e}`,l).then(async i=>{const g=await i.json();return i.ok?g.data:Promise.reject(g)})},ne=e=>{let t="";try{t=JSON.stringify(e)}catch(o){console.warn(o)}return t},ae=e=>{let t;try{t=JSON.parse(e)}catch(o){console.warn(o)}return t},C=(e,t)=>{window.localStorage.setItem(e,ne(t))},k=e=>{const t=window.localStorage.getItem(e);return ae(t||"")},le=()=>{var o;let e="",t="";return e=window.location.href,t=(o=e==null?void 0:e.split("?")[1])==null?void 0:o.split("=")[1],t};var q=(e,t)=>{const o=e.__vccOpts||e;for(const[u,r]of t)o[u]=r;return o};const ie=U({name:"Home",setup(){let e,t=le();const o=M(),u=O({username:"",github:"",originText:"",latestText:"",newText:"",email:""}),r=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,l=/^https:\/\/github.com.*$/,T=O({username:[{min:2,max:25,message:"\u6635\u79F0\u957F\u5EA6\u9700\u8981\u4E3A2\u523025\u4E4B\u95F4",trigger:"blur"}],github:[{validator:(c,a,s)=>{a===""?s(new Error("\u8BF7\u8F93\u5165\u60A8\u7684github\u4E3B\u9875\u5730\u5740")):l.test(u.github)||s(new Error("github\u4E3B\u9875\u5730\u5740\u4E0D\u6B63\u786E\uFF0C\u8BF7\u4EE5https://github.com\u5F00\u5934")),s()},required:!0,trigger:"blur"}],newText:[{validator:(c,a,s)=>{a===""?s(new Error("\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9")):(u.newText===u.latestText&&s(new Error("\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9")),s())},required:!0,trigger:"blur"}],email:[{validator:(c,a,s)=>{a===""?s(new Error("\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740")):r.test(u.email)||s(new Error("\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E")),s()},required:!0,trigger:"blur"}]}),F=async()=>{if(t){const c=k("tw");await E("next_msg",{data:{msgid:t}}).then(a=>{if(u.originText=a[0].msgen,u.latestText=a[0].msgzh,u.newText=a[0].msgzh,t=a[0].msgid,c){const{name:s,github:f,email:h}=c;u.username=s,u.github=f,u.email=h}})}};return R(async()=>{const c=k("tw");t?await E("get_msg",{data:{msgid:t},method:"post"}).then(a=>{if(u.originText=a[0].msgen,u.latestText=a[0].msgzh,u.newText=a[0].msgzh,c){const{name:s,github:f,email:h}=c;u.username=s,u.github=f,u.email=h}}):z.info("\u8BF7\u4ECE Nav2 \u4E2D\u6587\u7F51\u9875\u9762\u8FDB\u5165")}),{form:u,submitForm:()=>{o.value.validate(c=>{if(c){const s={calibmsg:u.newText,msgid:t,name:u.username,github:u.github,email:u.email};E("calib_msg",{data:s,method:"POST"}).then(f=>{console.log(f,"submitForm"),b({message:"\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01",type:"success"});const V=s,{calibmsg:h,msgid:y}=V,p=B(V,["calibmsg","msgid"]);C("tw",p)}).catch(f=>{b.error(f)})}else z({title:"Error",message:"\u8F93\u5165\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u60A8\u8F93\u5165\u7684\u5185\u5BB9",type:"error"})})},submitFormTitle:()=>{const a={calibmsg:u.newText,msgid:t,name:u.username,github:u.github,email:u.email,status:200};E("calib_msg",{data:a,method:"POST"}).then(s=>{console.log(s,"submitForm"),b({message:"\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01",type:"success"});const p=a,{calibmsg:f,msgid:h}=p,y=B(p,["calibmsg","msgid"]);C("tw",y)}).catch(s=>{b.error(s)})},submitFormUnTrans:()=>{const a={calibmsg:u.newText,msgid:t,name:u.username,github:u.github,email:u.email,status:201};E("calib_msg",{data:a,method:"POST"}).then(s=>{console.log(s,"submitForm"),b({message:"\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01",type:"success"});const p=a,{calibmsg:f,msgid:h}=p,y=B(p,["calibmsg","msgid"]);C("tw",y)}).catch(s=>{b.error(s)})},data:e,rules:T,getNextMsg:F,formRef:o}}}),me={class:"container"},de=A("h2",{class:"title"}," \u5F00\u6E90\u4E92\u52A9 \u5171\u540C\u8FDB\u6B65 \u611F\u8C22\u60A8\u7684\u6821\u6B63 ",-1),ce={class:"btns"},ge=v("\u6807\u8BB0\u6807\u9898"),fe=v("\u6807\u8BB0\u65E0\u9700\u7FFB\u8BD1"),pe=v("\u63D0\u4EA4"),Fe=v("\u4E0B\u4E00\u6761");function he(e,t,o,u,r,l){const i=J,g=Z,_=K,T=Q,F=W,D=X;return P(),Y("div",me,[de,n(D,{ref:"formRef",model:e.form,"label-width":"auto",rules:e.rules},{default:m(()=>[n(T,{justify:"center",align:"center"},{default:m(()=>[n(_,{span:8},{default:m(()=>[n(g,{label:"\u6635\u79F0\uFF1A",prop:"username"},{default:m(()=>[n(i,{modelValue:e.form.username,"onUpdate:modelValue":t[0]||(t[0]=d=>e.form.username=d),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u6635\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),n(_,{span:8},{default:m(()=>[n(g,{label:"github\u4E3B\u9875\uFF1A",prop:"github"},{default:m(()=>[n(i,{modelValue:e.form.github,"onUpdate:modelValue":t[1]||(t[1]=d=>e.form.github=d),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684github\u4E3B\u9875\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1}),n(_,{span:8},{default:m(()=>[n(g,{label:"\u90AE\u7BB1\uFF1A",prop:"email"},{default:m(()=>[n(i,{modelValue:e.form.email,"onUpdate:modelValue":t[2]||(t[2]=d=>e.form.email=d),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(g,{label:"\u539F\u6587\u5185\u5BB9\uFF1A"},{default:m(()=>[n(i,{modelValue:e.form.originText,"onUpdate:modelValue":t[3]||(t[3]=d=>e.form.originText=d),type:"textarea",readonly:"",autosize:""},null,8,["modelValue"])]),_:1}),n(g,{label:"\u4E0A\u4E00\u7248\u672C\u7FFB\u8BD1\u5185\u5BB9\uFF1A"},{default:m(()=>[n(i,{modelValue:e.form.latestText,"onUpdate:modelValue":t[4]||(t[4]=d=>e.form.latestText=d),type:"textarea",autosize:"",readonly:""},null,8,["modelValue"])]),_:1}),n(g,{label:"\u65B0\u7684\u7FFB\u8BD1\u5185\u5BB9\uFF1A",prop:"newText"},{default:m(()=>[n(i,{modelValue:e.form.newText,"onUpdate:modelValue":t[5]||(t[5]=d=>e.form.newText=d),type:"textarea",autosize:"",placeholder:"\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),n(g,null,{default:m(()=>[A("div",ce,[A("div",null,[n(F,{type:"primary",onClick:e.submitFormTitle},{default:m(()=>[ge]),_:1},8,["onClick"]),n(F,{type:"primary",onClick:e.submitFormUnTrans},{default:m(()=>[fe]),_:1},8,["onClick"])]),A("div",null,[n(F,{type:"primary",onClick:e.submitForm},{default:m(()=>[pe]),_:1},8,["onClick"]),n(F,{type:"primary",onClick:e.getNextMsg},{default:m(()=>[Fe]),_:1},8,["onClick"])])])]),_:1})]),_:1},8,["model","rules"])])}var I=q(ie,[["render",he]]);const be=U({components:{Home:I},name:"App",setup(){return{}}});function Be(e,t,o,u,r,l){const i=ee("home");return P(),te(i)}var Ee=q(be,[["render",Be]]);const _e=[{path:"/",redirect:"/home"},{path:"/home/:msgid",name:"Home",component:I}],ye=ue({history:oe(),routes:_e}),L=se(Ee);L.use(ye);L.mount("#app");
