var ue=Object.defineProperty;var $=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var j=(e,u,a)=>u in e?ue(e,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[u]=a,H=(e,u)=>{for(var a in u||(u={}))G.call(u,a)&&j(e,a,u[a]);if($)for(var a of $(u))I.call(u,a)&&j(e,a,u[a]);return e};var A=(e,u)=>{var a={};for(var c in e)G.call(e,c)&&u.indexOf(c)<0&&(a[c]=e[c]);if(e!=null&&$)for(var c of $(e))u.indexOf(c)<0&&I.call(e,c)&&(a[c]=e[c]);return a};import{l as te,d as q,r as S,a as R,o as oe,E as J,b as ae,c as ne,e as le,f as se,g as re,h as ie,i as me,j as ce,k as de,m as ge,n as pe,p as fe,q as Fe,s as he,t as x,w as i,u as E,v as y,x as l,y as f,z as Z,A as be,F as _e,B as U,C as T,D as Be,G as Ee,H as ye,I as Ce}from"./vendor.85dd4959.js";const we=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const m of n)if(m.type==="childList")for(const t of m.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&c(t)}).observe(document,{childList:!0,subtree:!0});function a(n){const m={};return n.integrity&&(m.integrity=n.integrity),n.referrerpolicy&&(m.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?m.credentials="include":n.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(n){if(n.ep)return;n.ep=!0;const m=a(n);fetch(n.href,m)}};we();const K="http://dev.nav2.fishros.com/calib",C=async(e,c={})=>{var n=c,{data:u}=n,a=A(n,["data"]);console.log(K,"apiUrl");const m=H({method:"GET"},a);return m.method.toUpperCase()==="GET"?(e+=`?${te.stringify(u)}`,console.log("endponit",e)):m.body=JSON.stringify(u||{}),window.fetch(`${K}/${e}`,m).then(async t=>{const d=await t.json();return t.ok?d.data:Promise.reject(d)})},Ae=e=>{let u="";try{u=JSON.stringify(e)}catch(a){console.warn(a)}return u},Te=e=>{let u;try{u=JSON.parse(e)}catch(a){console.warn(a)}return u},P=(e,u)=>{window.localStorage.setItem(e,Ae(u))},Q=e=>{const u=window.localStorage.getItem(e);return Te(u||"")},De=()=>{var a;let e="",u="";return e=window.location.href,u=(a=e==null?void 0:e.split("?")[1])==null?void 0:a.split("=")[1],u},ve=e=>{let u=new Date(e),a=u.getMonth()+1,c="-"+(a<10?"0"+a:a),n=u.getDate(),m="-"+(n<10?"0"+n:n),t=u.getHours(),d=" "+(t<10?"0"+t:t),F=u.getMinutes(),D=":"+(F<10?"0"+F:F),h=u.getSeconds(),v=":"+(h<10?"0"+h:h);return u.getFullYear()+c+m+d+D+v};var W=(e,u)=>{const a=e.__vccOpts||e;for(const[c,n]of u)a[c]=n;return a};const Ve=q({name:"Home",setup(){let e,u=S();const a=S(),c=S("calibpage");let n=De();const m=S(),t=R({username:"",github:"",originText:"",latestText:"",newText:"",email:""}),d=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,F=/^https:\/\/github.com.*$/,z=R({username:[{min:2,max:25,message:"\u6635\u79F0\u957F\u5EA6\u9700\u8981\u4E3A2\u523025\u4E4B\u95F4",trigger:"blur"}],github:[{validator:(o,r,s)=>{r===""?s(new Error("\u8BF7\u8F93\u5165\u60A8\u7684github\u4E3B\u9875\u5730\u5740")):F.test(t.github)||s(new Error("github\u4E3B\u9875\u5730\u5740\u4E0D\u6B63\u786E\uFF0C\u8BF7\u4EE5https://github.com\u5F00\u5934")),s()},required:!0,trigger:"blur"}],newText:[{validator:(o,r,s)=>{r===""?s(new Error("\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9")):(t.newText.trim()===t.latestText&&s(new Error("\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9")),s())},required:!0,trigger:"blur"}],email:[{validator:(o,r,s)=>{r===""?s(new Error("\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740")):d.test(t.email)||s(new Error("\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E")),s()},required:!0,trigger:"blur"}]}),L=async()=>{if(n){const o=Q("tw");await C("next_msg",{data:{msgid:n}}).then(r=>{var s,p,_,B;if(t.originText=(s=r[0])==null?void 0:s.msgen,t.latestText=(p=r[0])==null?void 0:p.msgzh,t.newText=(_=r[0])==null?void 0:_.msgzh,n=(B=r[0])==null?void 0:B.msgid,o){const{name:b,github:N,email:ee}=o;t.username=b,t.github=N,t.email=ee}})}},V=async()=>{const o=Q("tw");await C("get_msg",{data:{msgid:n},method:"post"}).then(r=>{if(t.originText=r[0].msgen,t.latestText=r[0].msgzh,t.newText=r[0].msgzh,a.value=r[0].change_log,o){const{name:s,github:p,email:_}=o;t.username=s,t.github=p,t.email=_}})};oe(async()=>{n?(await V(),await g()):J.info("\u8BF7\u4ECE Nav2 \u4E2D\u6587\u7F51\u9875\u9762\u8FDB\u5165")}),ae(async()=>{await g()});const k=()=>{m.value.validate(o=>{if(o){const s={calibmsg:t.newText.trim(),msgid:n,name:t.username,github:t.github,email:t.email};C("calib_msg",{data:s,method:"POST"}).then(async p=>{E({message:`\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01\u606D\u559C\u60A8\u5DF2\u7D2F\u8BA1\u6821\u51C6${p.calibcount}\u8BCD\u6C47`,type:"success",duration:6e3});const N=s,{calibmsg:_,msgid:B}=N,b=A(N,["calibmsg","msgid"]);P("tw",b),await V()}).catch(p=>{E.error(p)})}else J({title:"Error",message:"\u8F93\u5165\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u60A8\u8F93\u5165\u7684\u5185\u5BB9",type:"error"})})},w=()=>{const r={calibmsg:t.newText.trim(),msgid:n,name:t.username,github:t.github,email:t.email,status:200};C("calib_msg",{data:r,method:"POST"}).then(s=>{E({message:`\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01\u606D\u559C\u60A8\u5DF2\u7D2F\u8BA1\u6821\u51C6${s.calibcount}\u8BCD\u6C47`,type:"success",duration:6e3});const b=r,{calibmsg:p,msgid:_}=b,B=A(b,["calibmsg","msgid"]);P("tw",B)}).catch(s=>{E.error(s)})},M=()=>{const r={calibmsg:t.newText.trim(),msgid:n,name:t.username,github:t.github,email:t.email,status:201};C("calib_msg",{data:r,method:"POST"}).then(s=>{E({message:`\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01\u606D\u559C\u60A8\u5DF2\u7D2F\u8BA1\u6821\u51C6${s.calibcount}\u8BCD\u6C47`,type:"success",duration:6e3});const b=r,{calibmsg:p,msgid:_}=b,B=A(b,["calibmsg","msgid"]);P("tw",B)}).catch(s=>{E.error(s)})},O=(o,r)=>{console.log(o,r)},g=()=>{C("calib_rank").then(o=>{console.log(o,"rankres"),u.value=o,console.log(u.value,"rankData")})};return{form:t,submitForm:k,submitFormTitle:w,submitFormUnTrans:M,data:e,rules:z,getNextMsg:L,formRef:m,changeLog:a,formatGMT:ve,handleClickTab:O,rankData:u,activeName:c}}}),ke={class:"container"},Ne=f("h2",{class:"title"},"\u5F00\u6E90\u4E92\u52A9\uFF0C\u5171\u540C\u63D0\u9AD8",-1),$e={class:"btns"},Se=T("\u6807\u8BB0\u6807\u9898"),xe=T("\u6807\u8BB0\u65E0\u9700\u7FFB\u8BD1"),Ue=T("\u63D0\u4EA4"),ze=T("\u4E0B\u4E00\u6761"),Le=f("h3",{class:"logTitle"},"\u6821\u51C6\u66F4\u65B0\u8BB0\u5F55\uFF1A",-1),Me={class:"calibmsg-title"},Oe=["href"],Pe={key:1},Ge=["href"];function Ie(e,u,a,c,n,m){const t=ne,d=le,F=se,D=re,h=ie,v=me,z=ce,L=de,V=ge,k=pe,w=fe,M=Fe,O=he;return y(),x(O,{modelValue:e.activeName,"onUpdate:modelValue":u[6]||(u[6]=g=>e.activeName=g),onTabClick:e.handleClickTab,value:""},{default:i(()=>[l(k,{label:"\u6821\u51C6\u9875",name:"calibpage"},{default:i(()=>{var g;return[f("div",ke,[Ne,l(v,{ref:"formRef",model:e.form,"label-width":"auto",rules:e.rules},{default:i(()=>[l(D,{justify:"center",align:"center"},{default:i(()=>[l(F,{span:8},{default:i(()=>[l(d,{label:"\u6635\u79F0\uFF1A",prop:"username"},{default:i(()=>[l(t,{modelValue:e.form.username,"onUpdate:modelValue":u[0]||(u[0]=o=>e.form.username=o),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u6635\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),l(F,{span:8},{default:i(()=>[l(d,{label:"github\u4E3B\u9875\uFF1A",prop:"github"},{default:i(()=>[l(t,{modelValue:e.form.github,"onUpdate:modelValue":u[1]||(u[1]=o=>e.form.github=o),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684github\u4E3B\u9875\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1}),l(F,{span:8},{default:i(()=>[l(d,{label:"\u90AE\u7BB1\uFF1A",prop:"email"},{default:i(()=>[l(t,{modelValue:e.form.email,"onUpdate:modelValue":u[2]||(u[2]=o=>e.form.email=o),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(d,{label:"\u539F\u6587\u5185\u5BB9\uFF1A"},{default:i(()=>[l(t,{modelValue:e.form.originText,"onUpdate:modelValue":u[3]||(u[3]=o=>e.form.originText=o),type:"textarea",readonly:"",autosize:""},null,8,["modelValue"])]),_:1}),l(d,{label:"\u4E0A\u4E00\u7248\u672C\u7FFB\u8BD1\u5185\u5BB9\uFF1A"},{default:i(()=>[l(t,{modelValue:e.form.latestText,"onUpdate:modelValue":u[4]||(u[4]=o=>e.form.latestText=o),type:"textarea",autosize:"",readonly:""},null,8,["modelValue"])]),_:1}),l(d,{label:"\u65B0\u7684\u7FFB\u8BD1\u5185\u5BB9\uFF1A",prop:"newText"},{default:i(()=>[l(t,{modelValue:e.form.newText,"onUpdate:modelValue":u[5]||(u[5]=o=>e.form.newText=o),type:"textarea",autosize:"",placeholder:"\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),l(d,null,{default:i(()=>[f("div",$e,[f("div",null,[l(h,{type:"primary",onClick:e.submitFormTitle},{default:i(()=>[Se]),_:1},8,["onClick"]),l(h,{type:"primary",onClick:e.submitFormUnTrans},{default:i(()=>[xe]),_:1},8,["onClick"])]),f("div",null,[l(h,{type:"primary",onClick:e.submitForm},{default:i(()=>[Ue]),_:1},8,["onClick"]),l(h,{type:"primary",onClick:e.getNextMsg},{default:i(()=>[ze]),_:1},8,["onClick"])])])]),_:1})]),_:1},8,["model","rules"]),Le,((g=e.changeLog)==null?void 0:g.length)>0?(y(),x(V,{key:0},{default:i(()=>[(y(!0),Z(_e,null,be(e.changeLog,(o,r)=>(y(),x(L,{placement:"top",key:r,timestamp:e.formatGMT(o==null?void 0:o.update_time)},{default:i(()=>[l(z,null,{default:i(()=>[f("h4",Me,[f("a",{href:o==null?void 0:o.github,target:"_blank"},U(o==null?void 0:o.contributor),9,Oe),T(" \u6821\u51C6\u4E8E "+U(e.formatGMT(o==null?void 0:o.update_time)),1)]),f("p",null,U(o==null?void 0:o.calibmsg),1)]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1})):(y(),Z("p",Pe,"\u5F53\u524D\u6682\u65E0\u6821\u51C6\u5185\u5BB9\uFF0C\u5FEB\u6765\u6821\u51C6\u5427~"))])]}),_:1}),l(k,{label:"\u6392\u884C\u699C",name:"rank"},{default:i(()=>[l(M,{data:e.rankData,style:{width:"70%"},"header-cell-style":{"text-align":"center",color:"#333"},border:""},{default:i(()=>[l(w,{type:"index",label:"\u6392\u540D",align:"center",width:"180"}),l(w,{prop:"name",label:"\u8D21\u732E\u8005\u540D\u79F0",align:"center"},{default:i(g=>[f("a",{href:g.row.github},U(g.row.name),9,Ge)]),_:1}),l(w,{prop:"p_count",label:"\u6821\u51C6\u6BB5\u843D\u603B\u8BA1",align:"center"})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue","onTabClick"])}var Y=W(Ve,[["render",Ie]]);const je=q({components:{Home:Y},name:"App",setup(){return{}}});function He(e,u,a,c,n,m){const t=Be("home");return y(),x(t)}var qe=W(je,[["render",He]]);const Re=[{path:"/",redirect:"/home"},{path:"/home/:msgid",name:"Home",component:Y}],Je=Ee({history:ye(),routes:Re}),X=Ce(qe);X.use(Je);X.mount("#app");
