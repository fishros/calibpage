var W=Object.defineProperty;var x=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var M=(e,t,o)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,P=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&M(e,o,t[o]);if(x)for(var o of x(t))O.call(t,o)&&M(e,o,t[o]);return e};var T=(e,t)=>{var o={};for(var l in e)z.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(e!=null&&x)for(var l of x(e))t.indexOf(l)<0&&O.call(e,l)&&(o[l]=e[l]);return o};import{l as Y,d as j,r as G,a as I,o as X,E as q,b as ee,c as te,e as ue,f as oe,g as se,h as ne,i as ae,j as re,k as le,m as S,n as r,w as c,p as N,q as E,s as B,t as y,F as ie,u as me,v as A,x as $,y as ce,z as de,A as ge,B as fe}from"./vendor.ae092d52.js";const pe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const i of u)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function o(u){const i={};return u.integrity&&(i.integrity=u.integrity),u.referrerpolicy&&(i.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?i.credentials="include":u.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(u){if(u.ep)return;u.ep=!0;const i=o(u);fetch(u.href,i)}};pe();const H="http://dev.nav2.fishros.com/calib",v=async(e,l={})=>{var u=l,{data:t}=u,o=T(u,["data"]);console.log(H,"apiUrl");const i=P({method:"GET"},o);return i.method.toUpperCase()==="GET"?(e+=`?${Y.stringify(t)}`,console.log("endponit",e)):i.body=JSON.stringify(t||{}),window.fetch(`${H}/${e}`,i).then(async m=>{const g=await m.json();return m.ok?g.data:Promise.reject(g)})},Fe=e=>{let t="";try{t=JSON.stringify(e)}catch(o){console.warn(o)}return t},he=e=>{let t;try{t=JSON.parse(e)}catch(o){console.warn(o)}return t},U=(e,t)=>{window.localStorage.setItem(e,Fe(t))},R=e=>{const t=window.localStorage.getItem(e);return he(t||"")},Be=()=>{var o;let e="",t="";return e=window.location.href,t=(o=e==null?void 0:e.split("?")[1])==null?void 0:o.split("=")[1],t},_e=e=>{let t=new Date(e),o=t.getMonth()+1,l="-"+(o<10?"0"+o:o),u=t.getDate(),i="-"+(u<10?"0"+u:u),m=t.getHours(),g=" "+(m<10?"0"+u:u),h=t.getMinutes(),C=":"+(h<10?"0"+h:h),f=t.getSeconds(),w=":"+(f<10?"0"+f:f);return t.getFullYear()+l+i+g+C+w};var J=(e,t)=>{const o=e.__vccOpts||e;for(const[l,u]of t)o[l]=u;return o};const be=j({name:"Home",setup(){let e;const t=G();let o=Be();const l=G(),u=I({username:"",github:"",originText:"",latestText:"",newText:"",email:""}),i=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,m=/^https:\/\/github.com.*$/,f=I({username:[{min:2,max:25,message:"\u6635\u79F0\u957F\u5EA6\u9700\u8981\u4E3A2\u523025\u4E4B\u95F4",trigger:"blur"}],github:[{validator:(d,a,n)=>{a===""?n(new Error("\u8BF7\u8F93\u5165\u60A8\u7684github\u4E3B\u9875\u5730\u5740")):m.test(u.github)||n(new Error("github\u4E3B\u9875\u5730\u5740\u4E0D\u6B63\u786E\uFF0C\u8BF7\u4EE5https://github.com\u5F00\u5934")),n()},required:!0,trigger:"blur"}],newText:[{validator:(d,a,n)=>{a===""?n(new Error("\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9")):(u.newText.trim()===u.latestText&&n(new Error("\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9")),n())},required:!0,trigger:"blur"}],email:[{validator:(d,a,n)=>{a===""?n(new Error("\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740")):i.test(u.email)||n(new Error("\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E")),n()},required:!0,trigger:"blur"}]}),w=async()=>{if(o){const d=R("tw");await v("next_msg",{data:{msgid:o}}).then(a=>{var n,p,_,b;if(u.originText=(n=a[0])==null?void 0:n.msgen,u.latestText=(p=a[0])==null?void 0:p.msgzh,u.newText=(_=a[0])==null?void 0:_.msgzh,o=(b=a[0])==null?void 0:b.msgid,d){const{name:F,github:V,email:Q}=d;u.username=F,u.github=V,u.email=Q}})}},D=async()=>{const d=R("tw");await v("get_msg",{data:{msgid:o},method:"post"}).then(a=>{if(u.originText=a[0].msgen,u.latestText=a[0].msgzh,u.newText=a[0].msgzh,t.value=a[0].change_log,console.log(t,a[0].change_log),d){const{name:n,github:p,email:_}=d;u.username=n,u.github=p,u.email=_}})};return X(async()=>{o?(await D(),console.log("changeLog",t)):q.info("\u8BF7\u4ECE Nav2 \u4E2D\u6587\u7F51\u9875\u9762\u8FDB\u5165")}),{form:u,submitForm:()=>{l.value.validate(d=>{if(d){const n={calibmsg:u.newText.trim(),msgid:o,name:u.username,github:u.github,email:u.email};v("calib_msg",{data:n,method:"POST"}).then(async p=>{console.log(p,"submitForm"),E({message:"\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01",type:"success"});const V=n,{calibmsg:_,msgid:b}=V,F=T(V,["calibmsg","msgid"]);U("tw",F),await D()}).catch(p=>{E.error(p)})}else q({title:"Error",message:"\u8F93\u5165\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u60A8\u8F93\u5165\u7684\u5185\u5BB9",type:"error"})})},submitFormTitle:()=>{const a={calibmsg:u.newText.trim(),msgid:o,name:u.username,github:u.github,email:u.email,status:200};v("calib_msg",{data:a,method:"POST"}).then(n=>{console.log(n,"submitForm"),E({message:"\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01",type:"success"});const F=a,{calibmsg:p,msgid:_}=F,b=T(F,["calibmsg","msgid"]);U("tw",b)}).catch(n=>{E.error(n)})},submitFormUnTrans:()=>{const a={calibmsg:u.newText.trim(),msgid:o,name:u.username,github:u.github,email:u.email,status:201};v("calib_msg",{data:a,method:"POST"}).then(n=>{console.log(n,"submitForm"),E({message:"\u63D0\u4EA4\u6210\u529F\uFF0C\u68D2\u68D2\u54D2\uFF01",type:"success"});const F=a,{calibmsg:p,msgid:_}=F,b=T(F,["calibmsg","msgid"]);U("tw",b)}).catch(n=>{E.error(n)})},data:e,rules:f,getNextMsg:w,formRef:l,changeLog:t,formatGMT:_e}}}),Ee={class:"container"},ye=B("h2",{class:"title"}," \u5F00\u6E90\u4E92\u52A9 \u5171\u540C\u8FDB\u6B65 \u611F\u8C22\u60A8\u7684\u6821\u6B63 ",-1),we={class:"btns"},Te=A("\u6807\u8BB0\u6807\u9898"),Ae=A("\u6807\u8BB0\u65E0\u9700\u7FFB\u8BD1"),ve=A("\u63D0\u4EA4"),Ce=A("\u4E0B\u4E00\u6761"),De=B("h3",{class:"logTitle"},"\u6821\u51C6\u66F4\u65B0\u8BB0\u5F55\uFF1A",-1),Ve={class:"calibmsg-title"},xe=["href"],Se={key:1};function Ne(e,t,o,l,u,i){const m=ee,g=te,h=ue,C=oe,f=se,w=ne,D=ae,k=re,L=le;return y(),S("div",Ee,[ye,r(w,{ref:"formRef",model:e.form,"label-width":"auto",rules:e.rules},{default:c(()=>[r(C,{justify:"center",align:"center"},{default:c(()=>[r(h,{span:8},{default:c(()=>[r(g,{label:"\u6635\u79F0\uFF1A",prop:"username"},{default:c(()=>[r(m,{modelValue:e.form.username,"onUpdate:modelValue":t[0]||(t[0]=s=>e.form.username=s),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u6635\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),r(h,{span:8},{default:c(()=>[r(g,{label:"github\u4E3B\u9875\uFF1A",prop:"github"},{default:c(()=>[r(m,{modelValue:e.form.github,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.github=s),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684github\u4E3B\u9875\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1}),r(h,{span:8},{default:c(()=>[r(g,{label:"\u90AE\u7BB1\uFF1A",prop:"email"},{default:c(()=>[r(m,{modelValue:e.form.email,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.email=s),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(g,{label:"\u539F\u6587\u5185\u5BB9\uFF1A"},{default:c(()=>[r(m,{modelValue:e.form.originText,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.originText=s),type:"textarea",readonly:"",autosize:""},null,8,["modelValue"])]),_:1}),r(g,{label:"\u4E0A\u4E00\u7248\u672C\u7FFB\u8BD1\u5185\u5BB9\uFF1A"},{default:c(()=>[r(m,{modelValue:e.form.latestText,"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.latestText=s),type:"textarea",autosize:"",readonly:""},null,8,["modelValue"])]),_:1}),r(g,{label:"\u65B0\u7684\u7FFB\u8BD1\u5185\u5BB9\uFF1A",prop:"newText"},{default:c(()=>[r(m,{modelValue:e.form.newText,"onUpdate:modelValue":t[5]||(t[5]=s=>e.form.newText=s),type:"textarea",autosize:"",placeholder:"\u8BF7\u8F93\u5165\u60A8\u6821\u51C6\u4E4B\u540E\u7684\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),r(g,null,{default:c(()=>[B("div",we,[B("div",null,[r(f,{type:"primary",onClick:e.submitFormTitle},{default:c(()=>[Te]),_:1},8,["onClick"]),r(f,{type:"primary",onClick:e.submitFormUnTrans},{default:c(()=>[Ae]),_:1},8,["onClick"])]),B("div",null,[r(f,{type:"primary",onClick:e.submitForm},{default:c(()=>[ve]),_:1},8,["onClick"]),r(f,{type:"primary",onClick:e.getNextMsg},{default:c(()=>[Ce]),_:1},8,["onClick"])])])]),_:1})]),_:1},8,["model","rules"]),De,e.changeLog.length>0?(y(),N(L,{key:0},{default:c(()=>[(y(!0),S(ie,null,me(e.changeLog,(s,d)=>(y(),N(k,{placement:"top",key:d,timestamp:e.formatGMT(s==null?void 0:s.update_time)},{default:c(()=>[r(D,null,{default:c(()=>[B("h4",Ve,[B("a",{href:s==null?void 0:s.github,target:"_blank"},$(s==null?void 0:s.contributor),9,xe),A(" \u6821\u51C6\u4E8E "+$(e.formatGMT(s==null?void 0:s.update_time)),1)]),B("p",null,$(s==null?void 0:s.calibmsg),1)]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1})):(y(),S("p",Se,"\u5F53\u524D\u6682\u65E0\u6821\u51C6\u5185\u5BB9\uFF0C\u5FEB\u6765\u6821\u51C6\u5427~"))])}var Z=J(be,[["render",Ne]]);const $e=j({components:{Home:Z},name:"App",setup(){return{}}});function Ue(e,t,o,l,u,i){const m=ce("home");return y(),N(m)}var ke=J($e,[["render",Ue]]);const Le=[{path:"/",redirect:"/home"},{path:"/home/:msgid",name:"Home",component:Z}],ze=de({history:ge(),routes:Le}),K=fe(ke);K.use(ze);K.mount("#app");
